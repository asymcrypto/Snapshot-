<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ViralizeLab • Follower Snapshot</title>
  <meta name="description" content="Create beautiful follower milestone images for any platform — by ViralizeLab." />
  <style>
    /* --- Basic layout & utilities --- */
    :root{
      --bg:#0b1020;
      --card:#0f1724;
      --muted:#94a3b8;
      --accent:#26a6ff;
      --glass: rgba(255,255,255,0.04);
      --radius:14px;
      --mono: "Segoe UI Mono", "Roboto Mono", monospace;
      --sans: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:var(--sans);background:linear-gradient(180deg,#081226 0%, #061827 100%);color:#e6eef8}
    .wrap{max-width:1200px;margin:28px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center;margin-bottom:18px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#26a6ff,#7c5cff);display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:20px
    }
    h1{font-size:20px;margin:0}
    p.lead{color:var(--muted);margin:0;font-size:13px}

    /* main columns */
    .cols{display:grid;grid-template-columns:420px 1fr;gap:18px}
    .panel{background:var(--card);padding:16px;border-radius:var(--radius);box-shadow:0 6px 24px rgba(2,6,23,0.6)}
    .control{display:grid;gap:10px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type="text"], input[type="number"], select, textarea {
      display:block;width:100%;padding:10px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:inherit;font-size:14px;
    }
    .row{display:flex;gap:10px}
    .btn{background:var(--accent);color:#02233a;border:none;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .small{font-size:12px;padding:8px 10px}
    .switch{display:flex;gap:8px;align-items:center}
    .thumb{width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover}

    /* preview area */
    .previewWrap{display:flex;flex-direction:column;align-items:center;gap:12px}
    .canvasCard{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:12px;align-items:center}
    canvas{border-radius:12px;background:transparent;box-shadow:0 8px 40px rgba(3,7,18,0.6);}

    /* templates */
    .templates{display:flex;gap:10px;flex-wrap:wrap}
    .tmpl{padding:8px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;border:1px solid transparent}
    .tmpl.active{outline:2px solid rgba(38,166,255,0.12);border-color:rgba(38,166,255,0.15)}
    .muted{color:var(--muted);font-size:13px}

    footer{color:var(--muted);margin-top:20px;font-size:13px}
    .flex{display:flex;gap:10px;align-items:center}
    .left{flex:1}

    /* responsive */
    @media (max-width:980px){
      .cols{grid-template-columns:1fr; }
      .wrap{padding:12px}
    }

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">VL</div>
        <div>
          <h1>ViralizeLab — Follower Snapshot</h1>
          <p class="lead">Make milestone images for any platform. Fast PNG export, templates, and embed widget.</p>
        </div>
      </div>
      <div style="margin-left:auto" class="muted">Free • No account required • Client-side PNG</div>
    </header>

    <div class="cols">
      <!-- LEFT CONTROLS -->
      <div class="panel">
        <div class="control">
          <label>Template</label>
          <div class="templates" id="templates">
            <div class="tmpl active" data-tmpl="classic">Classic</div>
            <div class="tmpl" data-tmpl="dark">Dark</div>
            <div class="tmpl" data-tmpl="minimal">Minimal</div>
            <div class="tmpl" data-tmpl="gradient">Gradient</div>
          </div>

          <label style="margin-top:8px">Platform</label>
          <select id="platform">
            <option value="twitter">Twitter</option>
            <option value="instagram">Instagram</option>
            <option value="tiktok">TikTok</option>
            <option value="youtube">YouTube</option>
            <option value="linkedin">LinkedIn</option>
            <option value="custom">Custom</option>
          </select>

          <div class="row" style="margin-top:8px">
            <div style="flex:1">
              <label>Username</label>
              <input id="username" type="text" placeholder="@AsymAlwali" value="@AsymAlwali" />
            </div>
            <div style="width:130px">
              <label>Followers</label>
              <input id="count" type="text" inputmode="numeric" placeholder="1300" value="1300" />
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div style="flex:1">
              <label>Tagline (optional)</label>
              <input id="tagline" type="text" placeholder="Building GitForge × ViralizeLab — Day 1/66" value="Building GitForge × ViralizeLab — Day 1/66" />
            </div>
          </div>

          <label style="margin-top:8px">Profile Photo</label>
          <div class="row">
            <div class="thumb" id="thumbProfile"><img id="profilePreview" src="" alt=""></div>
            <div style="flex:1">
              <input id="profileUpload" type="file" accept="image/*" />
              <div class="muted" style="margin-top:6px;font-size:12px">Square photo recommended. (Max 4MB)</div>
            </div>
          </div>

          <label style="margin-top:8px">Brand / Logo (optional)</label>
          <div class="row">
            <div class="thumb" id="thumbLogo"><img id="logoPreview" src="" alt=""></div>
            <div style="flex:1">
              <input id="logoUpload" type="file" accept="image/*" />
              <div class="muted" style="margin-top:6px;font-size:12px">Small logo shown on the card.</div>
            </div>
          </div>

          <label style="margin-top:8px">Colors & Styles</label>
          <div class="row">
            <div style="flex:1">
              <label class="muted">Background</label>
              <input id="bgColor" type="color" value="#071428" style="width:100%;height:40px;border-radius:8px;padding:4px" />
            </div>
            <div style="width:120px">
              <label class="muted">Accent</label>
              <input id="accentColor" type="color" value="#26a6ff" style="width:100%;height:40px;border-radius:8px;padding:4px" />
            </div>
          </div>

          <div class="row" style="margin-top:10px">
            <div style="flex:1">
              <label class="muted">Badge (e.g., 1K, 10K, 1M) — optional</label>
              <input id="badge" type="text" placeholder="1.3M" />
            </div>
            <div style="width:120px">
              <label class="muted">Size</label>
              <select id="size">
                <option value="1200x630">1200×630 (Twitter)</option>
                <option value="1080x1080">1080×1080 (Instagram)</option>
                <option value="1080x1920">1080×1920 (Story)</option>
                <option value="1600x900">1600×900 (YouTube)</option>
              </select>
            </div>
          </div>

          <div style="display:flex;gap:10px;margin-top:12px">
            <button class="btn" id="renderBtn">Render Preview</button>
            <button class="btn ghost" id="downloadBtn">Download PNG</button>
            <button class="btn ghost" id="resetBtn">Reset</button>
          </div>

          <div style="margin-top:12px" class="muted">
            <div><strong>Embed / Share:</strong></div>
            <textarea id="embedSnippet" style="width:100%;height:66px;padding:8px;border-radius:8px;margin-top:6px;background:rgba(255,255,255,0.02);border:1px dashed rgba(255,255,255,0.03);color:inherit;font-size:12px" readonly></textarea>
            <div style="margin-top:6px;font-size:12px">Paste this into Linktree or any page to embed a small snapshot widget.</div>
          </div>

          <div style="margin-top:12px" class="muted">
            <div><strong>Options</strong></div>
            <div class="switch" style="margin-top:8px">
              <input id="watermark" type="checkbox" checked /> <label for="watermark" style="margin-left:6px">Include ViralizeLab watermark (free)</label>
            </div>
          </div>

          <div style="margin-top:12px" class="muted small">
            Note: This generator works 100% in your browser — images never leave your device.
          </div>
        </div>
      </div>

      <!-- RIGHT PREVIEW -->
      <div class="panel">
        <div class="previewWrap">
          <div class="canvasCard">
            <canvas id="cardCanvas" width="1200" height="630"></canvas>
            <div style="display:flex;gap:10px;align-items:center;width:100%;justify-content:space-between">
              <div class="muted">Preview • Live</div>
              <div class="flex">
                <button class="btn small" id="downloadSmall">Export PNG</button>
                <button class="btn ghost small" id="copyShare">Copy Share Text</button>
              </div>
            </div>
          </div>

          <div style="width:100%" class="muted">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><strong>Template tips</strong></div>
              <div class="muted">Keep text short for best visuals</div>
            </div>
          </div>

          <footer>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                Made by <strong>ViralizeLab</strong> • Free snapshot maker
              </div>
              <div class="muted">Export PNG • Customize • Embed</div>
            </div>
          </footer>
        </div>
      </div>
    </div>
  </div>

  <script>
  // === Utility functions ===
  function el(id){return document.getElementById(id)}
  function readImageFile(file){ return new Promise((res,rej)=>{ const fr=new FileReader(); fr.onload=e=>res(e.target.result); fr.onerror=rej; fr.readAsDataURL(file) }) }

  // === DOM refs ===
  const canvas = el('cardCanvas'), ctx = canvas.getContext('2d');
  const profileUpload = el('profileUpload'), logoUpload = el('logoUpload');
  const profilePreview = el('profilePreview'), logoPreview = el('logoPreview');
  const thumbProfile = el('thumbProfile'), thumbLogo = el('thumbLogo');
  const username = el('username'), count = el('count'), tagline = el('tagline');
  const bgColor = el('bgColor'), accentColor = el('accentColor'), badge = el('badge');
  const platform = el('platform'), templates = document.querySelectorAll('.tmpl');
  const sizeSelect = el('size'), watermarkCheckbox = el('watermark');
  const renderBtn = el('renderBtn'), downloadBtn = el('downloadBtn'), resetBtn = el('resetBtn');
  const downloadSmall = el('downloadSmall'), embedSnippet = el('embedSnippet'), copyShare = el('copyShare');

  // state
  let state = {
    profileSrc: null,
    logoSrc: null,
    template: 'classic'
  };

  // handle uploads
  profileUpload.addEventListener('change', async e=>{
    const f = e.target.files[0]; if(!f) return;
    state.profileSrc = await readImageFile(f);
    profilePreview.src = state.profileSrc; thumbProfile.style.display='block';
    renderCanvas();
  });
  logoUpload.addEventListener('change', async e=>{
    const f = e.target.files[0]; if(!f) return;
    state.logoSrc = await readImageFile(f);
    logoPreview.src = state.logoSrc; thumbLogo.style.display='block';
    renderCanvas();
  });

  // template selection
  templates.forEach(t => {
    t.addEventListener('click', ()=> {
      templates.forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      state.template = t.dataset.tmpl;
      renderCanvas();
    });
  });

  // size switch
  sizeSelect.addEventListener('change', ()=>{
    const [w,h] = sizeSelect.value.split('x').map(Number);
    canvas.width = w; canvas.height = h;
    renderCanvas();
  });

  // initial canvas size settings
  (function initSize(){
    const [w,h] = sizeSelect.value.split('x').map(Number);
    canvas.width = w; canvas.height = h;
    renderCanvas();
  })();

  // basic text drawing helpers
  function roundRect(ctx,x,y,w,h,r){
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.arcTo(x+w,y,x+w,y+h,r);
    ctx.arcTo(x+w,y+h,x,y+h,r);
    ctx.arcTo(x,y+h,x,y,r);
    ctx.arcTo(x,y,x+w,y,r);
    ctx.closePath();
    ctx.fill();
  }

  // draw function
  function renderCanvas(){
    // clear
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // get parameters
    const bg = bgColor.value || '#071428';
    const accent = accentColor.value || '#26a6ff';
    const uname = username.value || '@you';
    const cnt = count.value || '0';
    const tag = tagline.value || '';
    const badgeTxt = badge.value || '';
    const includeWM = watermarkCheckbox.checked;

    // background
    if(state.template === 'gradient'){
      const g = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
      g.addColorStop(0, bg);
      g.addColorStop(1, accent);
      ctx.fillStyle = g;
      ctx.fillRect(0,0,canvas.width,canvas.height);
    } else if(state.template === 'dark'){
      ctx.fillStyle = '#05060a';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      // subtle pattern
      ctx.globalAlpha = 0.06;
      ctx.fillStyle = accent;
      for(let i=0;i<40;i++){
        ctx.fillRect((i*73)%canvas.width, (i*37)%canvas.height, 2, canvas.height);
      }
      ctx.globalAlpha = 1;
    } else {
      // solid bg
      ctx.fillStyle = bg;
      ctx.fillRect(0,0,canvas.width,canvas.height);
    }

    // card area
    const pad = Math.round(canvas.width * 0.06);
    const cardW = canvas.width - pad*2;
    const cardH = canvas.height - pad*2;
    const cardX = pad, cardY = pad;

    // drop shadow box
    ctx.save();
    ctx.shadowColor = 'rgba(0,0,0,0.45)';
    ctx.shadowBlur = 26;
    ctx.shadowOffsetY = 10;
    ctx.fillStyle = 'rgba(255,255,255,0.02)';
    roundRect(ctx, cardX, cardY, cardW, cardH, 18);
    ctx.restore();

    // layout: left side for profile, right side text
    const leftW = Math.round(cardW * 0.28);
    const rightX = cardX + leftW + 20;

    // Profile circle
    const avatarSize = Math.round(Math.min(leftW-20, cardH*0.4));
    const avatarX = cardX + 20;
    const avatarY = cardY + 20;

    // avatar background circle
    ctx.beginPath();
    ctx.arc(avatarX + avatarSize/2, avatarY + avatarSize/2, avatarSize/2 + 6, 0, Math.PI*2);
    ctx.fillStyle = 'rgba(255,255,255,0.03)';
    ctx.fill();

    // draw profile image if exists
    if(state.profileSrc){
      const img = new Image();
      img.onload = ()=>{
        // circle clip
        ctx.save();
        ctx.beginPath();
        ctx.arc(avatarX + avatarSize/2, avatarY + avatarSize/2, avatarSize/2, 0, Math.PI*2);
        ctx.closePath();
        ctx.clip();
        // draw
        // cover
        let sx=0, sy=0, sw=img.width, sh=img.height;
        const arImg = img.width / img.height;
        const arBox = 1;
        if(arImg > arBox) { // image wider -> crop sides
          sw = img.height * arBox;
          sx = (img.width - sw)/2;
        } else {
          sh = img.width / arBox;
          sy = (img.height - sh)/2;
        }
        ctx.drawImage(img, sx, sy, sw, sh, avatarX, avatarY, avatarSize, avatarSize);
        ctx.restore();
      };
      img.src = state.profileSrc;
    } else {
      // placeholder initials
      ctx.fillStyle = accent;
      ctx.beginPath();
      ctx.arc(avatarX + avatarSize/2, avatarY + avatarSize/2, avatarSize/2, 0, Math.PI*2);
      ctx.fill();
      ctx.fillStyle = '#041623';
      ctx.font = `${Math.round(avatarSize*0.42)}px ${'sans-serif'}`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText((username.value||'@you').replace('@','').slice(0,2).toUpperCase(), avatarX + avatarSize/2, avatarY + avatarSize/2);
    }

    // draw big follower count on right
    ctx.fillStyle = '#fff';
    ctx.font = `bold ${Math.round(cardH*0.18)}px ${'sans-serif'}`;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    // big number:
    // make it fit: reduce size until fits width
    let fsize = Math.round(cardH*0.18);
    ctx.font = `bold ${fsize}px sans-serif`;
    let text = cnt.toString();
    let maxW = cardW - leftW - 60;
    while(ctx.measureText(text).width > maxW && fsize>18){
      fsize -= 4;
      ctx.font = `bold ${fsize}px sans-serif`;
    }
    ctx.fillText(text, rightX, cardY + 24);

    // platform & username
    ctx.fillStyle = 'rgba(255,255,255,0.82)';
    ctx.font = `600 ${Math.round(cardH*0.045)}px sans-serif`;
    ctx.fillText(platform.value.toUpperCase(), rightX, cardY + 24 + fsize + 8);

    ctx.fillStyle = 'rgba(255,255,255,0.9)';
    ctx.font = `500 ${Math.round(cardH*0.038)}px sans-serif`;
    ctx.fillText(uname, rightX, cardY + 24 + fsize + 8 + Math.round(cardH*0.05));

    // tagline / small text
    if(tag){
      ctx.fillStyle = 'rgba(255,255,255,0.75)';
      ctx.font = `400 ${Math.round(cardH*0.032)}px sans-serif`;
      wrapText(ctx, tag, rightX, cardY + cardH - 70, Math.round(maxW), Math.round(cardH*0.038));
    }

    // badge circle
    if(badgeTxt){
      const badgeR = Math.round(Math.min(cardW*0.07,70));
      const bx = cardX + cardW - badgeR - 20;
      const by = cardY + 20;
      ctx.fillStyle = accent;
      ctx.beginPath();
      ctx.arc(bx, by, badgeR, 0, Math.PI*2);
      ctx.fill();
      ctx.fillStyle = '#02131B';
      ctx.font = `700 ${Math.round(badgeR*0.5)}px sans-serif`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(badgeTxt, bx, by);
    }

    // logo (small)
    if(state.logoSrc){
      const logo = new Image();
      logo.onload = ()=>{
        const lw = Math.round(cardW*0.12);
        const lx = cardX + cardW - lw - 20;
        const ly = cardY + cardH - lw - 20;
        ctx.save();
        ctx.beginPath();
        ctx.rect(lx, ly, lw, lw);
        ctx.clip();
        ctx.drawImage(logo, lx, ly, lw, lw);
        ctx.restore();
      };
      logo.src = state.logoSrc;
    }

    // watermark
    if(includeWM){
      ctx.save();
      ctx.globalAlpha = 0.9;
      ctx.fillStyle = 'rgba(255,255,255,0.06)';
      ctx.font = `600 ${Math.round(cardH*0.02)}px ${'sans-serif'}`;
      ctx.textAlign = 'right';
      ctx.fillText('ViralizeLab • snapshot', cardX + cardW - 12, cardY + cardH - 12);
      ctx.restore();
    }

    // add subtle rounded border highlight
    ctx.strokeStyle = 'rgba(255,255,255,0.03)';
    ctx.lineWidth = 1;
    roundRect(ctx, cardX, cardY, cardW, cardH, 18);
  }

  // wrap text helper
  function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
    const words = text.split(' ');
    let line = '';
    for (let n = 0; n < words.length; n++) {
      const testLine = line + words[n] + ' ';
      const metrics = ctx.measureText(testLine);
      const testWidth = metrics.width;
      if (testWidth > maxWidth && n > 0) {
        ctx.fillText(line, x, y);
        line = words[n] + ' ';
        y += lineHeight;
      } else {
        line = testLine;
      }
    }
    ctx.fillText(line, x, y);
  }

  // download function
  function downloadImage(filename='snapshot.png'){
    const link = document.createElement('a');
    link.href = canvas.toDataURL('image/png');
    link.download = filename;
    link.click();
  }

  // generate embed snippet (simple iframe to a hosted URL or a direct "generate with query" approach)
  function updateEmbedSnippet(){
    // simple snippet that calls the hosted tool with query params (you'll host snapshot.html somewhere)
    const host = window.location.origin + window.location.pathname.replace(/\/[^/]*$/,''); // approximate current
    const snippet = `<iframe src="${host}/snapshot.html?username=${encodeURIComponent(username.value)}&count=${encodeURIComponent(count.value)}&template=${state.template}" style="width:600px;height:350px;border:none;border-radius:12px;overflow:hidden"></iframe>`;
    embedSnippet.value = snippet;
  }

  // event hooks
  renderBtn.addEventListener('click', ()=>{
    renderCanvas();
    updateEmbedSnippet();
  });
  downloadBtn.addEventListener('click', ()=>downloadImage('viralizelab_snapshot.png'));
  downloadSmall.addEventListener('click', ()=>downloadImage('viralizelab_snapshot.png'));
  copyShare.addEventListener('click', ()=>{
    const txt = `${username.value} • ${count.value} followers — created with ViralizeLab Snapshot\nhttps://viralizelab.example`; // change to real URL after deploy
    navigator.clipboard.writeText(txt).then(()=> alert('Share text copied to clipboard'));
  });

  resetBtn.addEventListener('click', ()=>{
    username.value='@AsymAlwali';
    count.value = '1300';
    tagline.value = 'Building GitForge × ViralizeLab — Day 1/66';
    bgColor.value = '#071428';
    accentColor.value = '#26a6ff';
    badge.value='';
    profilePreview.src = ''; logoPreview.src = '';
    state.profileSrc = null; state.logoSrc = null;
    renderCanvas();
  });

  // small autosave (localStorage)
  function persistState(){
    try {
      const save = {
        username: username.value, count: count.value, tagline: tagline.value,
        bg: bgColor.value, accent: accentColor.value, template: state.template
      };
      localStorage.setItem('vl_snapshot', JSON.stringify(save));
    } catch(e){}
  }
  function loadState(){
    try{
      const raw = localStorage.getItem('vl_snapshot'); if(!raw) return;
      const s = JSON.parse(raw);
      username.value = s.username || username.value;
      count.value = s.count || count.value;
      tagline.value = s.tagline || tagline.value;
      bgColor.value = s.bg || bgColor.value;
      accentColor.value = s.accent || accentColor.value;
      state.template = s.template || state.template;
      // mark template UI
      templates.forEach(t=> t.classList.toggle('active', t.dataset.tmpl === state.template));
    }catch(e){}
  }
  setInterval(()=>persistState(), 2000);

  // initial load
  loadState();
  renderCanvas();
  updateEmbedSnippet();

  // Allow querystring prefill for embed usage
  (function handleQuery(){
    const params = new URLSearchParams(location.search);
    if(params.has('username')) username.value = params.get('username');
    if(params.has('count')) count.value = params.get('count');
    if(params.has('template')) {
      state.template = params.get('template');
      templates.forEach(t=> t.classList.toggle('active', t.dataset.tmpl === state.template));
    }
    renderCanvas();
    updateEmbedSnippet();
  })();

  </script>
</body>
</html>
